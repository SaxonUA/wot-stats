<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏ WoT</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
    }
    canvas {
      background: #222;
      border-radius: 50%;
      box-shadow: 0 0 15px #444;
      position: relative;
    }
    .wheel-wrapper {
      position: relative;
      display: inline-block;
      transition: box-shadow 0.3s ease;
    }
    .wheel-wrapper.highlight {
      box-shadow: 0 0 30px 10px #ffff00;
    }
    .arrow {
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 35px solid red;
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
      z-index: 10;
    }
    .smoke {
      position: absolute;
      width: 20px;
      height: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: puff 4s infinite;
    }
    @keyframes puff {
      0% { transform: scale(0.5) translateY(0); opacity: 0.4; }
      100% { transform: scale(2.5) translateY(-100px); opacity: 0; }
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      font-size: 20px;
      color: #00ffcc;
    }
    .history {
      margin-top: 30px;
      color: #ccc;
    }
    .wheel-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 50px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>üéØ –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏ World of Tanks</h1>
  <div class="wheel-container">
    <div>
      <div class="wheel-wrapper" id="tankWrapper">
        <div class="arrow"></div>
        <canvas id="tankWheel" width="300" height="300"></canvas>
      </div>
      <button onclick="spin('tank')">–ö—Ä—É—Ç–∏—Ç–∏ —Ç–∞–Ω–∫</button>
      <div class="result" id="tankResult">...</div>
    </div>
    <div>
      <div class="wheel-wrapper" id="missionWrapper">
        <div class="arrow"></div>
        <canvas id="missionWheel" width="300" height="300"></canvas>
      </div>
      <button onclick="spin('mission')">–ö—Ä—É—Ç–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è</button>
      <div class="result" id="missionResult">...</div>
    </div>
  </div>

  <div class="history" id="history"></div>
  <button onclick="saveResult()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>

  <script>
    const tanks = [
  "IS-7", "Maus", "T110E5", "AMX 50 B", "Obj. 140", "Leopard 1", "M48A5 Patton", "Progetto 65",
  "T-100 LT", "AMX 13 105", "Sheridan", "WZ-132-1", "Grille 15", "Obj. 268 v4", "T110E3", "Strv 103B",
  "BZ-176", "M47 Iron Arnie", "Char Mle. 75", "T95/FV4201 Chieftain", "Type 5 Heavy", "FV215b", "CS-63",
  "Centurion AX", "Kranvagn", "E 100", "STB-1", "Bat.-Ch√¢tillon 25 t", "Obj. 277", "Super Conqueror",
  "UDES 15/16", "T57 Heavy", "AMX M4 54", "T-62A", "TVP T 50/51", "121", "Minotauro", "Obj. 263",
  "VK 72.01 K", "Obj. 705A", "WZ-111 QL", "Char Futur 4", "T26E5", "Skorpion G", "SU-130PM", "IS-3-II",
  "ISU-152K", "Progetto 46", "Bourrasque", "Somua SM"
];
    const missions = [
  "–ó–Ω–∏—â–∏—Ç–∏ 3 –≤–æ—Ä–æ–∂—ñ —Ç–∞–Ω–∫–∏", "–ù–∞–Ω–µ—Å—Ç–∏ 3000+ —à–∫–æ–¥–∏", "–í–∏–∂–∏—Ç–∏ –¥–æ –∫—ñ–Ω—Ü—è –±–æ—é", "–ó—Ä–æ–±–∏—Ç–∏ 5+ –ø—ñ–¥—Å–≤—ñ—Ç—ñ–≤",
  "–ó–Ω–∏—â–∏—Ç–∏ –∞—Ä—Ç–∏–ª–µ—Ä—ñ—é", "2+ —Ñ—Ä–∞–≥–∏ –±–µ–∑ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —à–∫–æ–¥–∏", "1000+ —à–∫–æ–¥–∏ –∑–∞ –ø—ñ–¥—Å–≤—ñ—Ç–∞–º–∏",
  "2 —Ç–∞–Ω–∫–∏ –≤ –±–ª–∏–∂–Ω—å–æ–º—É –±–æ—é", "–ú–µ–¥–∞–ª—å –û—Å–Ω–æ–≤–Ω–∏–π –∫–∞–ª—ñ–±—Ä", "3+ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è",
  "–ó–Ω–∏—â–∏—Ç–∏ —Ç–∞–Ω–∫ –Ω–∞ 2 —Ä—ñ–≤–Ω—ñ –≤–∏—â–µ", "–í–∏–∂–∏—Ç–∏ –∑ <10% HP", "5+ –≤–ª—É—á–∞–Ω—å –ø–æ—Å–ø—ñ–ª—å",
  "–ó–∞—Ö–æ–ø–∏—Ç–∏ –∞–±–æ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É", "–ó–Ω–∏—â–∏—Ç–∏ –∑–∞—Ö–æ–ø–ª—é–≤–∞—á–∞ –±–∞–∑–∏", "–ú–µ–¥–∞–ª—å –í–æ—ó–Ω",
  "2 —Ñ—Ä–∞–≥–∏ –∑–∞ 30 —Å–µ–∫", "–ó–Ω–∏—â–∏—Ç–∏ —Ç–∞—Ä–∞–Ω–æ–º", "–ó–Ω–∏—â–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–º —Å–Ω–∞—Ä—è–¥–æ–º", "500+ —à–∫–æ–¥–∏ –±–µ–∑ –≤–∏—è–≤–ª–µ–Ω–Ω—è"
];
    let spinning = false;
    let currentAngle = { tank: 0, mission: 0 };
    const history = [];

    function drawWheel(canvasId, items, angleOffset = 0) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext("2d");
      const radius = canvas.width / 2;
      const centerX = radius;
      const centerY = radius;
      const total = items.length;
      const angleStep = (2 * Math.PI) / total;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = 0; i < total; i++) {
        const angle = i * angleStep + angleOffset;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, angle, angle + angleStep);
        ctx.fillStyle = i % 2 === 0 ? "#ff6600" : "#1a1a1a";
        ctx.fill();
        ctx.save();
        ctx.translate(centerX, centerY);
        ctx.rotate(angle + angleStep / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "white";
        ctx.font = "11px sans-serif";
        ctx.fillText(items[i].slice(0, 18), radius - 10, 5);
        ctx.restore();
      }
    }

    function spin(type) {
      if (spinning) return;
      spinning = true;
      const canvasId = type === 'tank' ? 'tankWheel' : 'missionWheel';
      const wrapperId = type === 'tank' ? 'tankWrapper' : 'missionWrapper';
      const resultId = type === 'tank' ? 'tankResult' : 'missionResult';
      const items = type === 'tank' ? tanks : missions;
      let angle = currentAngle[type];
      let velocity = Math.random() * 0.1 + 0.15;
      const deceleration = 0.001;
      const wrapper = document.getElementById(wrapperId);
      wrapper.classList.remove("highlight");

      const interval = setInterval(() => {
        angle += velocity;
        velocity *= 0.99;
        drawWheel(canvasId, items, angle);
        if (velocity < deceleration) {
          clearInterval(interval);
          currentAngle[type] = angle % (2 * Math.PI);
          const index = Math.floor(((3 * Math.PI / 2 - (angle % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI)) / (2 * Math.PI) * items.length) % items.length;
          const selected = items[index];
          document.getElementById(resultId).textContent = selected;
          wrapper.classList.add("highlight");
          spinning = false;
          updateHistory();
        }
      }, 20);
    }

    function updateHistory() {
      const tank = document.getElementById('tankResult').textContent;
      const mission = document.getElementById('missionResult').textContent;
      if (tank !== '...' && mission !== '...') {
        history.push([tank, mission]);
        const div = document.getElementById('history');
        div.innerHTML = `<h3>–Ü—Å—Ç–æ—Ä—ñ—è —Å–ø—ñ–Ω—ñ–≤</h3><ul>` +
          history.map((h, i) => `<li>${i + 1}. ${h[0]} ‚Äî ${h[1]}</li>`).join('') + '</ul>';
      }
    }

    function saveResult() {
      const tank = document.getElementById('tankResult').textContent;
      const mission = document.getElementById('missionResult').textContent;
      const text = `–¢–∞–Ω–∫: ${tank}\n–ó–∞–≤–¥–∞–Ω–Ω—è: ${mission}`;
      const blob = new Blob([text], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'wot_result.txt';
      a.click();
    }

    window.onload = () => {
      drawWheel("tankWheel", tanks);
      drawWheel("missionWheel", missions);
    };
  </script>
</body>
</html>
